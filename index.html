
<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, height=device-height, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <title>DnD Combat!</title>
  </head>
  <body>
<div class="p-3  bg-dark text-white">
    <h1>Character Name: <p id="characterName"</p> 
  <input type="text" class="form-control" id="nameInput">
     <button type="button" class="btn btn-success" onclick="setName()">Set Name</button>
   </h1>

   <h2> Current HP:</h2>
<span class="badge badge-pill badge-success" id="hpDisplay"> <p id="hp"></p> </span>
<div class="progress">
  <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width:100%; background-color: #00cc66;">
     <span id="current-hp"></span>
  </div>
</div>
<hr>

<hr>
<div class="container bg-dark p-3">
  <div class="panel-group bg-dark">
    <div class="panel panel-default bg-dark text-white">
      <div class="panel-heading bg-dark text-white ">
        <h4 class="panel-title bg-dark text-white ">
          <a data-toggle="collapse" href="#Modifier_Panel" class="text-success">Stats Panel</a>
        </h4>
      </div>
      <div id="Modifier_Panel" class="panel-collapse collapse">
        <div class="panel-body rounded " style="background-color:#495057 ">
        	
        	<span class="label label-default" style="color:#ff6666" id="strLabel">Str:</span>
        	<span class="badge badge-pill badge-primary" style="background-color:#ff6666" id="strModDisplay"> <p id="strModNum"></p> </span>
        	<input type="number" class="form-control" id="StrStat" style="width:10%" min=8 placeholder="8" value=8>
        	<br>

        	<span class="label label-default" style="color:#339933" id="dexLabel">Dex:</span>
        	<span class="badge badge-pill badge-primary" style="background-color:#339933" id="dexModDisplay"> <p id="dexModNum"></p> </span>
        	<input type="number" class="form-control" id="DexStat" style="width:10%" min=8 placeholder="8">
        	<br>

        	<span class="label label-default" style="color:#ffffff" id="conLabel">Con:</span>
        	<span class="badge badge-pill badge-primary" style="background-color:#ff9966" id="conModDisplay"> <p id="conModNum"></p> </span>
        	<input type="number" class="form-control" id="ConStat" style="width:10%" min=8  max=20 placeholder="8">
        	<br>


        	<span class="label label-default" style="color:#0099cc" id="intLabel">Int:</span>
        	<span class="badge badge-pill badge-primary -p 3" style="background-color:#0099cc" id="intModDisplay"> <p id="intModNum"></p> </span>
        	<input type="number" class="form-control" id="IntStat" style="width:10%" min=8 max=20 placeholder="8">
        	<br>

        	<span class="label label-default" style="color:#9966ff" id="wisLabel">Wis:</span>
        	<span class="badge badge-pill badge-primary" style="background-color:#9966ff" id="wisModDisplay"> <p id="wisModNum"></p> </span>
        	<input type="number" class="form-control" id="WisStat" style="width:10%" min=8 max=20 placeholder="8">
        	<br>

        	<span class="label label-default" style="color:#ff66cc" id="chrLabel">Chr:</span>
        	<span class="badge badge-pill badge-primary" style="background-color:#ff66cc" id="chrModDisplay"> <p id="chrModNum"></p> </span>
        	<input type="number" class="form-control" id="ChrStat" style="width:10%" min=8 max=20 placeholder="8">
        	<br>

     		<button type="button" class="btn btn-success" onclick="calculateStats()">Calculate Stats</button>

        </div>
      </div>
    </div>
  </div>
</div>

<div class="container bg-dark p-3">
  <div class="panel-group bg-dark">
    <div class="panel panel-default bg-dark text-white">
      <div class="panel-heading bg-dark text-white ">
        <h4 class="panel-title bg-dark text-white ">
          <a data-toggle="collapse" href="#setHPPanel" class="text-success">Set HP Panel</a>
        </h4>
      </div>
      <div id="setHPPanel" class="panel-collapse collapse">
    <div class="form-group" id=SetHPForm>
  <label for="usr"> Set HP:</label>
  <input type="number" class="form-control" id="hpInput">
      <button type="button" class="btn btn-success" onclick="setHP()">SetHP</button>
    </div>
</div>
</div>
</div>
</div>


<div class="container bg-dark p-3">
  <div class="panel-group bg-dark">
    <div class="panel panel-default bg-dark text-white">
      <div class="panel-heading bg-dark text-white ">
        <h4 class="panel-title bg-dark text-white ">
          <a data-toggle="collapse" href="#collapse1" class="text-success">HP Calculator</a>
        </h4>
      </div>
      <div id="collapse1" class="panel-collapse collapse">
        <div class="panel-body">
        	
		<div id="Attack Panel">
		  <input type="number" class="form-control" id="attackDMG" placeholder="0">
		    <button type="button" class="btn btn-danger" onclick="attackCalculator()">Take Damage</button>
		    </div>
		    
		<div id="Heal Panel">
		  <input type="number" class="form-control" id="healAmnt" placeholder="0">
		    <button type="button" class="btn btn-success" onclick="healCalculator()">Heal</button>
		    </div>

        </div>
      </div>
    </div>
  </div>
</div>

<div class="container bg-dark p-3">
  <div class="panel-group bg-dark">
    <div class="panel panel-default bg-dark text-white">
      <div class="panel-heading bg-dark text-white ">
        <h4 class="panel-title bg-dark text-white ">
          <a data-toggle="collapse" href="#Inventory_Panel" class="text-success">Inventory Panel</a>
        </h4>
      </div>
      <div id="Inventory_Panel" class="panel-collapse collapse">
        <div class="panel-body rounded " style="background-color:#495057 ">
			<h1>Inventory:</h1>
			<div id="inventory_container"></div>
			
        </div>
          <input type="text" class="form-control" id="itemToAdd" placeholder="item name..." style="width:50%">
		    <button type="button" class="btn btn-success" onclick="addItem()">Add Item</button>
      <button type="button" class="btn btn-danger" onclick="removeItem()">Remove Item</button>
      </div>
    </div>
  </div>
</div>

<footer><div class="p-3 bg-dark text-white"></div></footer>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script>  
      var hpNum = 0 + hpInput.value;
      var hpMax = 0 + hpInput.value;
      var hpPercent = (hpNum/hpMax);

	  var items = [];

      StrStat.value = 8;
      document.getElementById("strModNum").innerHTML = Math.floor(((StrStat.value - 10)/2)).toString();

      DexStat.value = 8;
      document.getElementById("dexModNum").innerHTML = Math.floor(((DexStat.value - 10)/2)).toString();

      ConStat.value = 8;
      document.getElementById("conModNum").innerHTML = Math.floor(((ConStat.value - 10)/2)).toString();

      IntStat.value = 8;
      document.getElementById("intModNum").innerHTML = Math.floor(((IntStat.value - 10)/2)).toString();

      WisStat.value = 8;
      document.getElementById("wisModNum").innerHTML = Math.floor(((WisStat.value - 10)/2)).toString();

      ChrStat.value = 8;
      document.getElementById("chrModNum").innerHTML = Math.floor(((ChrStat.value - 10)/2)).toString();

		var str = '<form><select id="mySelect" size=15 style="width:50%">';


		items.forEach(function(item) 
		{
  		str += '<option>'+ item + '</option>';
		}); 

		str += '</select> </form>';
		
		document.getElementById("inventory_container").innerHTML = str;

      function setName()
      {
        document.getElementById("characterName").innerHTML = nameInput.value;

        document.title = "DnD Combat: " + characterName.innerHTML;

      }

      function setHP()
      {
          hpNum = hpInput.value;
          hpMax = hpInput.value;
          hpPercent = (hpNum/hpMax)*100;
          var widthTxt = "width:100%";
          console.log(hpPercent);
          document.getElementsByClassName("progress-bar")[0].setAttribute("style", "width:" +hpPercent.toString()+"%; " + "background-color:" + "#00cc66" );

          document.getElementById("hp").innerHTML = hpInput.value.toString();
          document.getElementById("current-hp").innerHTML = hpNum.toString();
          document.getElementById("hpDisplay").setAttribute("style","background-color:"+"#00cc66");
          //document.getElementById("SetHPForm").innerHTML = "";
      }

      function resetHP()
      {

      }

      function calculateStats()
      {
      		  if(StrStat.value>0)
      		  {
      		  	document.getElementById("strModNum").innerHTML ="+" + Math.floor(((StrStat.value - 10)/2));
      		  }
      		  else
      		  {
      		  	document.getElementById("strModNum").innerHTML = Math.floor(((StrStat.value - 10)/2));
      		  }
      	      
      	      if(DexStat.value>0)
      		  {
      	      	document.getElementById("dexModNum").innerHTML ="+" +Math.floor(((DexStat.value - 10)/2));
      	  	  }
      	  	  else
      	  	  {
      	      	document.getElementById("dexModNum").innerHTML = Math.floor(((DexStat.value - 10)/2));
      	  	  }

      	  	  if(ConStat.value>0)
      	  	  {
      	  	  	document.getElementById("conModNum").innerHTML ="+" + Math.floor(((ConStat.value - 10)/2));
      	  	  }
      	  	  else
      	  	  {
      	  	  	document.getElementById("conModNum").innerHTML = Math.floor(((ConStat.value - 10)/2));
      	  	  }

      	  	  if(IntStat.value>0)
      	  	  {
      	      	document.getElementById("intModNum").innerHTML = "+" + Math.floor(((IntStat.value - 10)/2));
      	      }
      	      else
      	      {
      	      	document.getElementById("intModNum").innerHTML = Math.floor(((IntStat.value - 10)/2));
      	      }
      	      if(WisStat.value>0)
      	  	  {
      	      	document.getElementById("wisModNum").innerHTML = "+" + Math.floor(((WisStat.value - 10)/2));
      	      }
      	      else
      	      {
      	      	document.getElementById("wisModNum").innerHTML = Math.floor(((WisStat.value - 10)/2));
      	      }

      	     if(ChrStat.value>0)
      	     {
      	      	document.getElementById("chrModNum").innerHTML = "+" + Math.floor(((ChrStat.value - 10)/2));
      	     }
      	 	 else
			 {
				document.getElementById("chrModNum").innerHTML = Math.floor(((ChrStat.value - 10)/2));
			 }


      }

      function attackCalculator()
      {

        hpNum = hpNum - attackDMG.value;
        hpPercent = (hpNum/hpMax)*100;

        if(hpNum<0)
        {
        	hpNum = parseInt(0);
        }

        var widthTxt = "width:100%";
        console.log(hpPercent);
        document.getElementById("hp").innerHTML = hpNum.toString();
        document.getElementById("current-hp").innerHTML = hpNum.toString();
        
        if(hpPercent<75)
        {
          document.getElementsByClassName("progress-bar")[0].setAttribute("style", "width:" +hpPercent.toString()+"%; " + "background-color:" + "#ffcc00" );
          document.getElementById("hpDisplay").setAttribute("style","background-color:"+" #ffcc00");
        }

        if(hpPercent<50)
        {
          document.getElementsByClassName("progress-bar")[0].setAttribute("style", "width:" +hpPercent.toString()+"%; " + "background-color:" + "#ff6600" );
          document.getElementById("hpDisplay").setAttribute("style","background-color:"+"#ff6600");
        }

        if(hpPercent<25)
        {
          document.getElementsByClassName("progress-bar")[0].setAttribute("style", "width:" +hpPercent.toString()+"%; " + "background-color:" + "#ff5050" );
          document.getElementById("hpDisplay").setAttribute("style","background-color:"+"#ff5050");
        }
        
      }
      function removeItem()
      {
      	  var x = document.getElementById("mySelect");
  		  x.remove(x.selectedIndex);
      }
     function addItem()
      {
      	
		
		items.push(itemToAdd.value);
		var str = '<form><select id="mySelect" size=15 style="width:50%">';


		items.forEach(function(item) 
		{
  		str += '<option>'+ item + '</option>';
		}); 

		str += '</select> </form>';
		
		document.getElementById("inventory_container").innerHTML = str;
      }
       function healCalculator()
      {

        console.log(hpNum);
        if(hpNum<hpMax)
        {
        	        hpNum= parseInt(hpNum) + parseInt(healAmnt.value);        
        }
        if(hpNum>hpMax)
        {
        	hpNum = parseInt(hpMax);
        }
        hpPercent = (hpNum/hpMax)*100;

        var widthTxt = "width:100%";
        console.log(hpPercent);
        document.getElementById("hp").innerHTML = hpNum.toString();
        document.getElementById("current-hp").innerHTML = hpNum.toString();
        
        if(hpPercent>75)
        {
        	          document.getElementsByClassName("progress-bar")[0].setAttribute("style", "width:" +hpPercent.toString()+"%; " + "background-color:" + "#00cc66" );
          document.getElementById("hpDisplay").setAttribute("style","background-color:"+" #00cc66");
        }

        if(hpPercent<75)
        {
          document.getElementsByClassName("progress-bar")[0].setAttribute("style", "width:" +hpPercent.toString()+"%; " + "background-color:" + "#ffcc00" );
          document.getElementById("hpDisplay").setAttribute("style","background-color:"+" #ffcc00");
        }

        if(hpPercent<50)
        {
          document.getElementsByClassName("progress-bar")[0].setAttribute("style", "width:" +hpPercent.toString()+"%; " + "background-color:" + "#ff6600" );
          document.getElementById("hpDisplay").setAttribute("style","background-color:"+"#ff6600");
        }

        if(hpPercent<25)
        {
          document.getElementsByClassName("progress-bar")[0].setAttribute("style", "width:" +hpPercent.toString()+"%; " + "background-color:" + "#ff5050" );
          document.getElementById("hpDisplay").setAttribute("style","background-color:"+"#ff5050");
        }
        
      }
    </script>
  </body>
</html>